const MILLENNIUM_IS_CLIENT_MODULE=!1,pluginName="battlepass-steam";function InitializePlugins(){var n,e;let t;(n=window.PLUGIN_LIST||(window.PLUGIN_LIST={}))[pluginName]||(n[pluginName]={}),(e=window.MILLENNIUM_PLUGIN_SETTINGS_STORE||(window.MILLENNIUM_PLUGIN_SETTINGS_STORE={}))[pluginName]||(e[pluginName]={}),window.MILLENNIUM_SIDEBAR_NAVIGATION_PANELS||(window.MILLENNIUM_SIDEBAR_NAVIGATION_PANELS={}),function(n){n[n.CallServerMethod=0]="CallServerMethod"}(t||(t={}));let o=window.MILLENNIUM_PLUGIN_SETTINGS_STORE[pluginName],i=`Millennium.Internal.IPC.[${pluginName}]`;const a={DropDown:["string","number","boolean"],NumberTextInput:["number"],StringTextInput:["string"],FloatTextInput:["number"],CheckBox:["boolean"],NumberSlider:["number"],FloatSlider:["number"]};o.ignoreProxyFlag=!1;const r=n=>new Proxy(n,{set(n,e,t){if(!(e in n))throw new TypeError(`Property ${String(e)} does not exist on plugin settings`);const r=a[n[e].type],l=n[e]?.range;if(r.includes("number")&&"number"==typeof t&&(l&&(t=function(n,e,t){return Math.max(e,Math.min(t,n))}(t,l[0],l[1])),t||(t=0)),!r.includes(typeof t))throw new TypeError(`Expected ${r.join(" or ")}, got ${typeof t}`);return n[e].value=t,((n,e)=>{o.ignoreProxyFlag||SteamClient.BrowserView.PostMessageToParent(i,JSON.stringify({name:n,value:e}))})(String(e),t),!0},get:(n,e)=>"__raw_get_internals__"===e?n:e in n?n[e].value:void 0});o.DefinePluginSetting=r,o.settingsStore=r({})}InitializePlugins();const __call_server_method__=(n,e)=>Millennium.callServerMethod(pluginName,n,e);function __wrapped_callable__(n){return n.startsWith("webkit:")?MILLENNIUM_API.callable((n,e)=>MILLENNIUM_API.__INTERNAL_CALL_WEBKIT_METHOD__(pluginName,n,e),n.replace(/^webkit:/,"")):MILLENNIUM_API.callable(__call_server_method__,n)}let PluginEntryPointMain=function(){return function(n){"use strict";return n.default=async function(){for(console.log("[BattlePass] Starting...");!document.body;)await new Promise(n=>setTimeout(n,100));(window.location.href.includes("store.steampowered.com")||window.location.href.includes("steamcommunity.com"))&&(function(){const n=document.createElement("style");n.textContent="\n.bp-toggle-btn {\n  position: fixed;\n  top: 50px;\n  right: 20px;\n  z-index: 999999;\n  background: #0396ff;\n  color: #fff;\n  border: none;\n  border-radius: 8px;\n  padding: 10px 20px;\n  font-size: 14px;\n  font-weight: 600;\n  cursor: pointer;\n  font-family: Arial, sans-serif;\n  box-shadow: 0 4px 15px rgba(3,150,255,0.4);\n  transition: all 0.2s;\n}\n.bp-toggle-btn:hover {\n  box-shadow: 0 4px 25px rgba(3,150,255,0.6);\n  transform: translateY(-2px);\n}\n.bp-form {\n  position: fixed;\n  top: 100px;\n  right: 20px;\n  width: 340px;\n  background: #1b2838;\n  border-radius: 12px;\n  box-shadow: 0 8px 32px rgba(0,0,0,0.5);\n  font-family: Arial, sans-serif;\n  z-index: 999998;\n  display: none;\n  color: #c7d5e0;\n}\n.bp-form.visible { display: block; }\n.bp-header {\n  background: #171a21;\n  padding: 15px 20px;\n  border-radius: 12px 12px 0 0;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.bp-header h3 {\n  margin: 0;\n  color: #fff;\n  font-size: 16px;\n}\n.bp-close {\n  background: none;\n  border: none;\n  color: #8f98a0;\n  font-size: 20px;\n  cursor: pointer;\n}\n.bp-close:hover { color: #fff; }\n.bp-content { padding: 20px; }\n.bp-section { margin-bottom: 15px; }\n.bp-label {\n  display: block;\n  color: #8f98a0;\n  font-size: 12px;\n  margin-bottom: 6px;\n}\n.bp-input {\n  width: 100%;\n  padding: 10px 12px;\n  background: #171a21;\n  border: 1px solid #2a3f5f;\n  border-radius: 6px;\n  color: #fff;\n  font-size: 14px;\n  box-sizing: border-box;\n}\n.bp-input:focus {\n  outline: none;\n  border-color: #0396ff;\n}\n.bp-amounts {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 6px;\n  margin-top: 8px;\n}\n.bp-amount-btn {\n  background: #171a21;\n  border: 1px solid #2a3f5f;\n  border-radius: 6px;\n  padding: 8px;\n  color: #c7d5e0;\n  cursor: pointer;\n  font-size: 13px;\n}\n.bp-amount-btn:hover { border-color: #0396ff; color: #fff; }\n.bp-pay-btn {\n  width: 100%;\n  background: #0396ff;\n  border: none;\n  border-radius: 6px;\n  padding: 12px;\n  color: #fff;\n  font-size: 15px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n  margin-top: 10px;\n}\n.bp-pay-btn:hover { background: #0aa8ff; }\n.bp-pay-btn:disabled {\n  background: #2a3f5f;\n  cursor: not-allowed;\n  color: #8f98a0;\n}\n.bp-note {\n  text-align: center;\n  color: #8f98a0;\n  font-size: 11px;\n  margin-top: 12px;\n}\n",document.head.appendChild(n);const e=document.createElement("button");e.className="bp-toggle-btn",e.textContent="Пополнить Steam",document.body.appendChild(e);const t=document.createElement("div");t.className="bp-form",t.innerHTML='\n    <div class="bp-header">\n      <h3>Пополнение Steam</h3>\n      <button class="bp-close">×</button>\n    </div>\n    <div class="bp-content">\n      <div class="bp-section">\n        <label class="bp-label">Steam логин:</label>\n        <input type="text" class="bp-input" id="bp-login" placeholder="Ваш логин Steam">\n      </div>\n      <div class="bp-section">\n        <label class="bp-label">Сумма (RUB):</label>\n        <input type="number" class="bp-input" id="bp-amount" placeholder="100" value="100" min="50">\n        <div class="bp-amounts">\n          <button class="bp-amount-btn" data-amount="100">100</button>\n          <button class="bp-amount-btn" data-amount="500">500</button>\n          <button class="bp-amount-btn" data-amount="1000">1000</button>\n        </div>\n      </div>\n      <button class="bp-pay-btn" id="bp-pay" disabled>Перейти к оплате</button>\n      <div class="bp-note">Вы будете перенаправлены на сайт BattlePass</div>\n    </div>\n  ',document.body.appendChild(t),e.onclick=()=>t.classList.toggle("visible"),t.querySelector(".bp-close").addEventListener("click",()=>{t.classList.remove("visible")}),t.querySelectorAll(".bp-amount-btn").forEach(n=>{n.addEventListener("click",()=>{document.getElementById("bp-amount").value=n.dataset.amount||"100",r()})});const o=document.getElementById("bp-login"),i=document.getElementById("bp-amount"),a=document.getElementById("bp-pay");function r(){const n=o.value.trim(),e=parseInt(i.value)||0;a.disabled=!(n&&e>=50)}o.addEventListener("input",r),i.addEventListener("input",r),a.addEventListener("click",()=>{const n=o.value.trim(),e=i.value;if(!n||!e)return;const t=`https://battlepass.ru/steam?account=${encodeURIComponent(n)}&amount=${e}&currency=rub&promocode=HELLO`;window.open(t,"_blank")})}(),console.log("[BattlePass] UI ready"))},Object.defineProperty(n,"__esModule",{value:!0}),n}({})};function ExecutePluginModule(){let n=window.MILLENNIUM_PLUGIN_SETTINGS_STORE[pluginName];n.OnPluginConfigChange=function(e,t,o){e in n.settingsStore&&(n.ignoreProxyFlag=!0,n.settingsStore[e]=o,n.ignoreProxyFlag=!1)},MILLENNIUM_BACKEND_IPC.postMessage(0,{pluginName:pluginName,methodName:"__builtins__.__millennium_plugin_settings_parser__"}).then(async e=>{"string"==typeof e.returnValue&&(n.ignoreProxyFlag=!0,n.settingsStore=n.DefinePluginSetting(Object.fromEntries(JSON.parse(atob(e.returnValue)).map(n=>[n.functionName,n]))),n.ignoreProxyFlag=!1);let t=PluginEntryPointMain();Object.assign(window.PLUGIN_LIST[pluginName],{...t,__millennium_internal_plugin_name_do_not_use_or_change__:pluginName});let o=await t.default();var i;o&&(i=o)&&void 0!==i.title&&void 0!==i.icon&&void 0!==i.content?window.MILLENNIUM_SIDEBAR_NAVIGATION_PANELS[pluginName]=o:console.warn(`Plugin ${pluginName} does not contain proper SidebarNavigation props and therefor can't be mounted by Millennium. Please ensure it has a title, icon, and content.`)})}ExecutePluginModule();