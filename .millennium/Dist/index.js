const MILLENNIUM_IS_CLIENT_MODULE=!0,pluginName="battlepass-steam";function InitializePlugins(){var e,n;let t;(e=window.PLUGIN_LIST||(window.PLUGIN_LIST={}))[pluginName]||(e[pluginName]={}),(n=window.MILLENNIUM_PLUGIN_SETTINGS_STORE||(window.MILLENNIUM_PLUGIN_SETTINGS_STORE={}))[pluginName]||(n[pluginName]={}),window.MILLENNIUM_SIDEBAR_NAVIGATION_PANELS||(window.MILLENNIUM_SIDEBAR_NAVIGATION_PANELS={}),function(e){e[e.CallServerMethod=0]="CallServerMethod"}(t||(t={}));let i=window.MILLENNIUM_PLUGIN_SETTINGS_STORE[pluginName],o=`Millennium.Internal.IPC.[${pluginName}]`;const r={DropDown:["string","number","boolean"],NumberTextInput:["number"],StringTextInput:["string"],FloatTextInput:["number"],CheckBox:["boolean"],NumberSlider:["number"],FloatSlider:["number"]};function a(e,n,i){return MILLENNIUM_BACKEND_IPC.postMessage(t.CallServerMethod,{pluginName:e,methodName:"__builtins__.__update_settings_value__",argumentList:{name:n,value:i}})}i.ignoreProxyFlag=!1,async function(){for(;"undefined"==typeof MainWindowBrowserManager;)await new Promise(e=>setTimeout(e,0));MainWindowBrowserManager?.m_browser?.on("message",(e,n)=>{if(e!==o)return;const{name:t,value:r}=JSON.parse(n);i.ignoreProxyFlag=!0,i.settingsStore[t]=r,a(pluginName,t,r),i.ignoreProxyFlag=!1})}();const l=e=>new Proxy(e,{set(e,n,t){if(!(n in e))throw new TypeError(`Property ${String(n)} does not exist on plugin settings`);const l=r[e[n].type],_=e[n]?.range;if(l.includes("number")&&"number"==typeof t&&(_&&(t=function(e,n,t){return Math.max(n,Math.min(t,e))}(t,_[0],_[1])),t||(t=0)),!l.includes(typeof t))throw new TypeError(`Expected ${l.join(" or ")}, got ${typeof t}`);return e[n].value=t,((e,n)=>{i.ignoreProxyFlag||(a(pluginName,e,n),"undefined"!=typeof MainWindowBrowserManager&&MainWindowBrowserManager?.m_browser?.PostMessage(o,JSON.stringify({name:e,value:n})))})(String(n),t),!0},get:(e,n)=>"__raw_get_internals__"===n?e:n in e?e[n].value:void 0});i.DefinePluginSetting=l,i.settingsStore=l({})}InitializePlugins();const __call_server_method__=(e,n)=>Millennium.callServerMethod(pluginName,e,n);function __wrapped_callable__(e){return e.startsWith("webkit:")?MILLENNIUM_API.callable((e,n)=>MILLENNIUM_API.__INTERNAL_CALL_WEBKIT_METHOD__(pluginName,e,n),e.replace(/^webkit:/,"")):MILLENNIUM_API.callable(__call_server_method__,e)}let PluginEntryPointMain=function(){return function(e){"use strict";return e.default=async function(){console.log("[BattlePass] Frontend loaded")},Object.defineProperty(e,"__esModule",{value:!0}),e}({})};function ExecutePluginModule(){let e=window.MILLENNIUM_PLUGIN_SETTINGS_STORE[pluginName];e.OnPluginConfigChange=function(n,t,i){n in e.settingsStore&&(e.ignoreProxyFlag=!0,e.settingsStore[n]=i,e.ignoreProxyFlag=!1)},MILLENNIUM_BACKEND_IPC.postMessage(0,{pluginName:pluginName,methodName:"__builtins__.__millennium_plugin_settings_parser__"}).then(async n=>{"string"==typeof n.returnValue&&(e.ignoreProxyFlag=!0,e.settingsStore=e.DefinePluginSetting(Object.fromEntries(JSON.parse(atob(n.returnValue)).map(e=>[e.functionName,e]))),e.ignoreProxyFlag=!1);let t=PluginEntryPointMain();Object.assign(window.PLUGIN_LIST[pluginName],{...t,__millennium_internal_plugin_name_do_not_use_or_change__:pluginName});let i=await t.default();var o;i&&(o=i)&&void 0!==o.title&&void 0!==o.icon&&void 0!==o.content?(window.MILLENNIUM_SIDEBAR_NAVIGATION_PANELS[pluginName]=i,MILLENNIUM_BACKEND_IPC.postMessage(1,{pluginName:pluginName})):console.warn(`Plugin ${pluginName} does not contain proper SidebarNavigation props and therefor can't be mounted by Millennium. Please ensure it has a title, icon, and content.`)})}ExecutePluginModule();